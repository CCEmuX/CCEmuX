plugins {
	id "org.xtext.xtend" version "1.0.12"
	id "application"
	id "com.github.johnrengelman.shadow" version "1.2.3"
	id "eclipse"
	id "idea"
}

mainClassName = "net.clgd.ccemux.CCEmuX"

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
	mavenCentral()
	
	maven {
		name = "eclipse-swt"
		url = "http://maven-eclipse.github.io/maven"
	}
	
	ivy {
		name = "computercraft"
		artifactPattern ccPattern
	}
}

project.ext.swtVersion = "4.6"

dependencies {
	compile "org.eclipse.xtend:org.eclipse.xtend.lib:2.10.0"
	
	compileOnly ":ComputerCraft:${ccVersion}"
	
	compile "org.slf4j:slf4j-simple:1.7.21"
	
	compile "org.eclipse.swt:org.eclipse.swt.win32.win32.x86:${swtVersion}"
	compile "org.eclipse.swt:org.eclipse.swt.win32.win32.x86_64:${swtVersion}"
	compile "org.eclipse.swt:org.eclipse.swt.gtk.linux.x86:${swtVersion}"
	compile "org.eclipse.swt:org.eclipse.swt.gtk.linux.x86_64:${swtVersion}"
	compile "org.eclipse.swt:org.eclipse.swt.cocoa.macosx.x86_64:${swtVersion}"
}

processResources {
	// contains CC metadata - eg version and URL
	from("gradle.properties")
}

jar {
	manifest {
		attributes 'SplashScreen-Image':'splash1.png'
	}
}

build.dependsOn shadowJar